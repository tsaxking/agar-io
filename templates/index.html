<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            padding: 0mm;
            margin: 0mm;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <canvas id = "canvas"></canvas>

    <script>
        // const canvas = document.querySelector("#canvas");
        // canvas.width = window.innerWidth;
        // canvas.height = window.innerHeight;
        // const ctx = canvas.getContext("2d")
        // let mousedown = false;
        // ctx.fillStyle = "rgb(225, 225, 225)";
        // console.log(ctx);
        // ctx.fillRect(0, 0, canvas.width, canvas.height);
        // // window.addEventListener("mousedown", (event) => {
        // //     mousedown = true;
        // // });
        // // window.addEventListener("mouseup", (event) => {
        // //     mouseup = false;
        // // });
        // // window.addEventListener("mousemove", (event) => {
        // //     if (mousedown) {
        // //         new Circle(event.pageX, event.pageY, 10, `rgb(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255})`).draw(canvas);
        // //     } 
        // // });

        // class Component {
        //     constructor(x, y) {
        //         this.x = x;
        //         this.y = y;
        //     }
        //     /**
        //      * just here for typescript stuff
        //      */
        //     draw(canvas) {

        //     }
        // }
        // class Circle extends Component {
        //     constructor(x, y, radius, color) {
        //         super (x, y);
        //         this.radius = radius;
        //         this.color = color;
        //     }
        //     draw (canvas) {
        //         const ctx = canvas.getContext("2d");
        //         ctx.beginPath();
        //         ctx.arc(this.x - this.radius/2, this.y - this.radius/2, this.radius, 0, Math.PI * 2)
        //         ctx.fillStyle = this.color;
        //         ctx.fill();
        //         ctx.closePath();
        //     }
        // }

    </script>
    <script>
        class Canvas {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');

                this.shapes = [];
            }

            addShape(shape) {
                this.shapes.push(shape);
            }

            removeShape(shape) {
                this.shapes = this.shapes.filter(s => s !== shape);
            }

            clear() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }

            draw() {
                this.clear();
                this.shapes.forEach(shape => shape.draw(this.ctx));
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
        }

        class Circle {
            constructor(x, y, radius, color, velocity) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.color = color;

                // velocity
                this.dx = velocity.x;
                this.dy = velocity.y;
            }

            draw(ctx) {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.closePath();

                this.update();
            }

            update() {
                this.x += this.dx;
                this.y += this.dy;
            }
        }

        class Mouse {
            constructor (x, y) {
                this.x = x;
                this.y = y;
            }
        }

        const circle = new Circle(100, 100, 50, 'gold', { x: 0.5, y: 0.5});
        const mouse = new Mouse(-100, -100);
        const canvas = new Canvas(document.querySelector('canvas'));
        canvas.resize();
        canvas.addShape(circle);
        
        document.addEventListener("mousemove", (event) => {
            mouse.x = event.x;
            mouse.y = event.y;
        });
        
        function animate() {
            const velocity = { x: 1, y: 1 }
            canvas.shapes.push(new Circle(mouse.x, mouse.y, Math.random() * 50, `rgb(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255})`. velocity));
            canvas.draw();
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>